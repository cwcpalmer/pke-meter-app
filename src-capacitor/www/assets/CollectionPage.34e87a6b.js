import{u as Q,a as re,o as se,b as M,c as ue,d as ie,Q as ce}from"./QRadio.d7657fdc.js";import{a as P,d as de,b as R,u as j,Q as U,h as ve}from"./Ripple.12fe2598.js";import{r as z,a as l,d as u,g as w,x as L,a3 as C,c as _,a4 as fe,Y as me,Z as ge,o as be,G as N,H as A,I as $,L as i,J as p,N as V,M as S,K as ke,a5 as he}from"./index.b250a799.js";import{Q as F}from"./QBtn.fa306d7e.js";import{Q as xe}from"./QPage.a495d58e.js";import{g as ye}from"./gathered-phone-data-store.805732d0.js";const G={...M,...j,...ue,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},H=["update:modelValue"];function J(e,r){const{props:t,slots:f,emit:d,proxy:v}=w(),{$q:m}=v,x=Q(t,m),s=z(null),{refocusTargetEl:o,refocusTarget:g}=re(t,s),b=P(t,se),k=l(()=>t.val!==void 0&&Array.isArray(t.modelValue)),c=l(()=>{const n=C(t.val);return k.value===!0?t.modelValue.findIndex(q=>C(q)===n):-1}),a=l(()=>k.value===!0?c.value!==-1:C(t.modelValue)===C(t.trueValue)),h=l(()=>k.value===!0?c.value===-1:C(t.modelValue)===C(t.falseValue)),y=l(()=>a.value===!1&&h.value===!1),I=l(()=>t.disable===!0?-1:t.tabindex||0),Y=l(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(x.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),Z=l(()=>{const n=a.value===!0?"truthy":h.value===!0?"falsy":"indet",q=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?a.value===!0:h.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${n}${q}`}),X=l(()=>{const n={type:"checkbox"};return t.name!==void 0&&Object.assign(n,{".checked":a.value,"^checked":a.value===!0?"checked":void 0,name:t.name,value:k.value===!0?t.val:t.trueValue}),n}),ee=ie(X),te=l(()=>{const n={tabindex:I.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":y.value===!0?"mixed":a.value===!0?"true":"false"};return t.disable===!0&&(n["aria-disabled"]="true"),n});function B(n){n!==void 0&&(L(n),g(n)),t.disable!==!0&&d("update:modelValue",ae(),n)}function ae(){if(k.value===!0){if(a.value===!0){const n=t.modelValue.slice();return n.splice(c.value,1),n}return t.modelValue.concat([t.val])}if(a.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(h.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function le(n){(n.keyCode===13||n.keyCode===32)&&L(n)}function oe(n){(n.keyCode===13||n.keyCode===32)&&B(n)}const ne=r(a,y);return Object.assign(v,{toggle:B}),()=>{const n=ne();t.disable!==!0&&ee(n,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const q=[u("div",{class:Z.value,style:b.value,"aria-hidden":"true"},n)];o.value!==null&&q.push(o.value);const T=t.label!==void 0?de(f.default,[t.label]):R(f.default);return T!==void 0&&q.push(u("div",{class:`q-${e}__label q-anchor--skip`},T)),u("div",{ref:s,class:Y.value,...te.value,onClick:B,onKeydown:le,onKeyup:oe},q)}}const qe=()=>u("div",{key:"svg",class:"q-checkbox__bg absolute"},[u("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[u("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),u("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Se=_({name:"QCheckbox",props:G,emits:H,setup(e){const r=qe();function t(f,d){const v=l(()=>(f.value===!0?e.checkedIcon:d.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>v.value!==null?[u("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[u(U,{class:"q-checkbox__icon",name:v.value})])]:[r]}return J("checkbox",t)}}),Ce=_({name:"QToggle",props:{...G,icon:String,iconColor:String},emits:H,setup(e){function r(t,f){const d=l(()=>(t.value===!0?e.checkedIcon:f.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),v=l(()=>t.value===!0?e.iconColor:null);return()=>[u("div",{class:"q-toggle__track"}),u("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},d.value!==void 0?[u(U,{name:d.value,color:v.value})]:void 0)]}return J("toggle",r)}});const K={radio:ce,checkbox:Se,toggle:Ce},Ve=Object.keys(K);function D(e,r){if(typeof e=="function")return e;const t=e!==void 0?e:r;return f=>f[t]}var _e=_({name:"QOptionGroup",props:{...M,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(fe),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>Ve.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:r,slots:t}){const{proxy:{$q:f}}=w(),d=Array.isArray(e.modelValue);e.type==="radio"?d===!0&&console.error("q-option-group: model should not be array"):d===!1&&console.error("q-option-group: model should be array in your case");const v=Q(e,f),m=l(()=>K[e.type]),x=l(()=>D(e.optionValue,"value")),s=l(()=>D(e.optionLabel,"label")),o=l(()=>D(e.optionDisable,"disable")),g=l(()=>e.options.map(a=>({val:x.value(a),name:a.name===void 0?e.name:a.name,disable:e.disable||o.value(a),leftLabel:a.leftLabel===void 0?e.leftLabel:a.leftLabel,color:a.color===void 0?e.color:a.color,checkedIcon:a.checkedIcon,uncheckedIcon:a.uncheckedIcon,dark:a.dark===void 0?v.value:a.dark,size:a.size===void 0?e.size:a.size,dense:e.dense,keepColor:a.keepColor===void 0?e.keepColor:a.keepColor}))),b=l(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),k=l(()=>{const a={role:"group"};return e.type==="radio"&&(a.role="radiogroup",e.disable===!0&&(a["aria-disabled"]="true")),a});function c(a){r("update:modelValue",a)}return()=>u("div",{class:b.value,...k.value},e.options.map((a,h)=>{const y=t["label-"+h]!==void 0?()=>t["label-"+h](a):t.label!==void 0?()=>t.label(a):void 0;return u("div",[u(m.value,{label:y===void 0?s.value(a):null,modelValue:e.modelValue,"onUpdate:modelValue":c,...g.value[h]},y)])}))}});const pe=["horizontal","vertical","cell","none"];var we=_({name:"QMarkupTable",props:{...M,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>pe.includes(e)}},setup(e,{slots:r}){const t=w(),f=Q(e,t.proxy.$q),d=l(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(f.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>u("div",{class:d.value},[u("table",{class:"q-table"},R(r.default))])}});const Ie={...j,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean};function Be(e,r,t){return t<=r?r:Math.min(t,Math.max(r,e))}const O=50,E=2*O,W=E*Math.PI,$e=Math.round(W*1e3)/1e3;var De=_({name:"QCircularProgress",props:{...Ie,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:r}){const{proxy:{$q:t}}=w(),f=P(e),d=l(()=>{const c=(t.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(t.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-c}deg)`:`rotate3d(0, 0, 1, ${c-90}deg)`}}),v=l(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),m=l(()=>E/(1-e.thickness/2)),x=l(()=>`${m.value/2} ${m.value/2} ${m.value} ${m.value}`),s=l(()=>Be(e.value,e.min,e.max)),o=l(()=>e.max-e.min),g=l(()=>e.thickness/2*m.value),b=l(()=>{const c=(e.max-s.value)/o.value,a=e.rounded===!0&&s.value<e.max&&c<.25?g.value/2*(1-c/.25):0;return W*c+a});function k({thickness:c,offset:a,color:h,cls:y,rounded:I}){return u("circle",{class:"q-circular-progress__"+y+(h!==void 0?` text-${h}`:""),style:v.value,fill:"transparent",stroke:"currentColor","stroke-width":c,"stroke-dasharray":$e,"stroke-dashoffset":a,"stroke-linecap":I,cx:m.value,cy:m.value,r:O})}return()=>{const c=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&c.push(u("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:O-g.value/2,cx:m.value,cy:m.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&c.push(k({cls:"track",thickness:g.value,offset:0,color:e.trackColor})),c.push(k({cls:"circle",thickness:g.value,offset:b.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const a=[u("svg",{class:"q-circular-progress__svg",style:d.value,viewBox:x.value,"aria-hidden":"true"},c)];return e.showValue===!0&&a.push(u("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},r.default!==void 0?r.default():[u("div",s.value)])),u("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:f.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:s.value},ve(r.internal,a))}}});const ze={class:"q-pa-md"},Oe={class:"text-left"},Qe={class:"text-left"},Me={class:"text-left"},Te={class:"text-left"},Le={class:"text-left"},Ue={__name:"CollectionPage",setup(e){const r=me(),t=z(!1),f=ge(),d=z(0),v=ye(),m=new Intl.DateTimeFormat("en-GB",{dateStyle:"full",timeStyle:"short"});be(async()=>{await r.openDatabase()});const x=async()=>{t.value=!0;let s=await r.getAllRecords(),o=s.values.length,g=0;d.value=0;for(let b=0;b<o;b++)fetch("https://www.geoappdata.com/api/v1/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"saveSensorReading",params:{timestamp:s.values[b].timestamp,lat:s.values[b].lat,lon:s.values[b].lon,extSensorId:s.values[b].extSensorId,readingValue:s.values[b].readingValue,extDeviceMac:s.values[b].extDeviceMac,name:f.connectedDeviceName,authCode:"JohnDevice123"}})}).then(k=>k.json()).then(async k=>{k.success?(console.log("successful"),g++,await r.deleteRecord(s.values[b].readingId),d.value=Math.round(g*100/o)):(console.log("failed"),t.value=!1)});t.value=!1};return(s,o)=>(N(),A(xe,{class:"flex flex-center"},{default:$(()=>[i("div",ze,[p(_e,{modelValue:s.separator,"onUpdate:modelValue":o[0]||(o[0]=g=>s.separator=g),inline:"",class:"q-mb-md",options:s.separatorOptions},null,8,["modelValue","options"]),p(we,{separator:"cell",flat:"",bordered:"",class:"bg-green-2"},{default:$(()=>[o[8]||(o[8]=i("thead",{class:"bg-green-4"},[i("tr",null,[i("th",{class:"text-left"},"Reading"),i("th",{class:"text-left"},"Value")])],-1)),i("tbody",null,[i("tr",null,[o[3]||(o[3]=i("td",{class:"text-left"},"Temperature",-1)),i("td",Oe,V(S(v).temp),1)]),i("tr",null,[o[4]||(o[4]=i("td",{class:"text-left"},"Temperature 2",-1)),i("td",Qe,V(S(v).temp2),1)]),i("tr",null,[o[5]||(o[5]=i("td",{class:"text-left"},"Latitude",-1)),i("td",Me,V(S(v).lastLocation.latitude),1)]),i("tr",null,[o[6]||(o[6]=i("td",{class:"text-left"},"Longitude",-1)),i("td",Te,V(S(v).lastLocation.longitude),1)]),i("tr",null,[o[7]||(o[7]=i("td",{class:"text-left"},"Time",-1)),i("td",Le,V(S(v).lastTimeStamp==null?"":S(m).format(new Date(S(v).lastTimeStamp))),1)])])]),_:1})]),p(F,{color:"negative",size:"xl",icon:"arrow_back",label:"Back",onClick:o[1]||(o[1]=g=>s.$router.push("/"))}),p(F,{color:"positive",size:"xl",icon:"help",label:"Upload",onClick:o[2]||(o[2]=g=>x())}),t.value?(N(),A(De,{key:0,"show-value":"","font-size":"12px",value:d.value,size:"50px",thickness:.22,color:"teal","track-color":"grey-3",class:"q-ma-md"},{default:$(()=>[ke(V(d.value)+"% ",1)]),_:1},8,["value"])):he("",!0)]),_:1}))}};export{Ue as default};
